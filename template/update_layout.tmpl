# Conditionally skip files and directories based on template configuration
# This file uses the Go template `skip` function to exclude files/directories
# from being generated based on user selections.

{{ $root_dir := printf `{{.project_name}}` }}

# =============================================================================
# Skip CI/CD platform directories based on selected platform
# =============================================================================
# Note: GitLab uses root `.gitlab-ci.yml` file (not a `.gitlab/` directory).
# We skip it explicitly for other platforms to avoid empty files.
{{ if eq .include_cicd "yes" }}
    {{ if eq .cicd_platform "github_actions" }}
        {{ skip (printf `%s/%s` $root_dir `.azure`) }}
        {{ skip (printf `%s/%s` $root_dir `.gitlab-ci.yml`) }}
    {{ else if eq .cicd_platform "azure_devops" }}
        {{ skip (printf `%s/%s` $root_dir `.github`) }}
        {{ skip (printf `%s/%s` $root_dir `.gitlab-ci.yml`) }}
    {{ else if eq .cicd_platform "gitlab" }}
        {{ skip (printf `%s/%s` $root_dir `.azure`) }}
        {{ skip (printf `%s/%s` $root_dir `.github`) }}
    {{ end }}
{{ else }}
    # CI/CD not included - skip all CI/CD directories
    {{ skip (printf `%s/%s` $root_dir `.azure`) }}
    {{ skip (printf `%s/%s` $root_dir `.github`) }}
    {{ skip (printf `%s/%s` $root_dir `.gitlab-ci.yml`) }}
{{ end }}

# Skip this layout file itself from being copied to output
{{ skip `update_layout` }}
